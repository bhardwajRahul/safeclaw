<!-- Generated by Claude. May contain inaccuracies - verify before acting on this. -->

# SafeClaw setup plan

## Token-based authentication

All auth uses tokens stored in `~/.config/safeclaw/.secrets/`. Tokens flow one way: host to container. No bidirectional sync needed.

### Tokens

| File | Env var | How to generate |
|------|---------|-----------------|
| `claude_oauth_token` | `CLAUDE_CODE_OAUTH_TOKEN` | `claude setup-token` (valid 1 year, uses Claude subscription) |
| `gh_token` | `GH_TOKEN` | Create a separate GitHub account for SafeClaw, log in with `gh auth login`, then `gh auth token` |

### How it works (in `scripts/run.sh`)

1. Check `~/.config/safeclaw/.secrets/` for each token file
2. If missing, walk the user through generating it interactively, save to host
3. On every run, inject as env vars when entering the container:
   `docker exec -e CLAUDE_CODE_OAUTH_TOKEN=$(cat ...) -e GH_TOKEN=$(cat ...) -it safeclaw /bin/bash`

Tokens only live on the host filesystem. Nothing is copied into the container.

### Cloud deployment

Same tokens, just pass as env vars directly:

- **Google Cloud Run:** `gcloud run deploy --set-env-vars` or Secret Manager
- **Oracle Cloud:** `docker run -e` or OCI Vault
- **Render:** Dashboard > Environment > Environment Variables
- **Any Docker host:** `docker run -e CLAUDE_CODE_OAUTH_TOKEN=... -e GH_TOKEN=...`

## Implementation changes

### Done

- Removed Slack integration (`tools/slack-read.js`, `setup/commands/slack.md`, `@slack/web-api` from Dockerfile, Slack setup prompt from `run.sh`, Slack references from `setup/CLAUDE.md`)
- Deleted `scripts/sync-config-and-secrets.sh` and `scripts/clean-secrets.sh`
- Rewrote `scripts/run.sh` - first-run interactive token setup, inject env vars on `docker exec`
- Updated Dockerfile - documented expected env vars, baked in all container setup (DX plugin, Playwright MCP, aliases, status line)
- Removed runtime `container-setup.sh` curl from `run.sh` and deleted it from `claude-code-tips` repo
